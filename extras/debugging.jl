using Revise
using MutableConvexHulls

orientation = CCW
collinear = true
sortedby = x -> (x[1], -x[2])

subhullpoints = [[(-3.4000000000052e17, 6.874999999820042e15), (31.84905015390723, 90.60152977599341), (34.29045640390723, 91.48396182317794), (39.31204678198537, 94.49782682025028)], [(-3.6000000000032e17, 6.250000000040042e15), (39.366365411828326, 61.543719840005025), (40.023283407135864, 61.69756802727929), (41.00839010706477, 104.24328707386206)], [(-3.6000000000036e17, 6.250000000000042e15), (32.12660591006352, 85.30466056732263), (34.42923428198537, 86.49706591461933), (36.73186265390723, 87.68947126191603), (37.58079598500626, 439.70638978382067)], [(-3.400000000004e17, 6.874999999940042e15), (38.145662286828326, 61.34482300196328), (40.604415771588094, 62.28905457297947)], [(-3.6000000000036e17, 6.250000000000042e15), (4.716025647750939, 187.88113662739488), (11.819284197001252, 212.7479635706477), (26.036645337255322, 398.43276443920513)], [(-3.4000000000052e17, 6.874999999820042e15), (29.40764390390723, 86.60114932317794), (31.57149439775094, 88.10352797058681)]]

subhulls = [lower_jarvismarch(points; orientation=orientation, collinear=collinear, sortedby=sortedby) for points in subhullpoints]
h = ChanLowerConvexHull{Tuple{Float64, Float64}}(orientation, collinear, sortedby)
empty!(h.subhulls)
push!(h.subhulls, subhulls...)

MutableConvexHulls.merge_hull_lists!(h)
